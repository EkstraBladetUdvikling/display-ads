!function(){"use strict";let e;const t=()=>(void 0===e&&(e=new URLSearchParams(window.location.search).has("debugHighImpact")),e),i=(e,...i)=>{t()&&console.log("[high-impact.js]",e,i.join(" "))},n=(e,i=!1)=>{(e&&t()||i)&&(e.dataset.highImpactJs=!0)},o={slots:{}},s=e=>e&&!e.startsWith("/")?`/${e}`:e,a=e=>{e.slot=s(e.slot);const t=`${e.slot}_${e.adUnitId}`;o.slots[t]=e,i("Slot defined",t)},r={push:e=>{"function"==typeof e&&e()}},d=(e,t)=>{window.highImpactJs.templateConfig=window.highImpactJs.templateConfig||{},window.highImpactJs.templateConfig[e]=t},l=e=>{window.highImpactJs.config=e};var c={name:"topscroll",onRender:({adWrapper:e,adUnit:t,adIframe:i},n,o)=>{const s=n.topBarHeight||o.topBarHeight||0,a=n.zIndex||o.zIndex||1000002,r=n.peekAmount;CSS.supports("height: 100dvh");const d=r||`calc(100vh - ${s}px)`;o.debug&&(Object.assign(e.style,{backgroundColor:"red"}),Object.assign(t.style,{backgroundColor:"red"})),Object.assign(e.style,{height:d,maxHeight:d,clipPath:`polygon(0 0, 100vw 0, 100vw ${d}, 0 ${d})`,webkitClipPath:`polygon(0 0, 100vw 0, 100vw ${d}, 0 ${d}`,margin:0,padding:0,position:"relative",zIndex:a}),Object.assign(i.style,{position:"fixed",left:0,zIndex:1,width:"100%",height:d,clip:"rect(auto, auto, auto, auto)"}),Object.assign(t.style,{width:"100vw",height:d});const l=()=>{const t=e.getBoundingClientRect().bottom;window.scrollTo({top:t,behavior:"smooth"})},c=document.createElement("div");c.style.position="absolute",c.style.bottom=0,c.style.left=0,c.style.width="100%",c.style.zIndex=999999999,c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.flexDirection="column",c.style.pointerEvents="none";const p=document.createElement("span");if(p.style.fontSize="18px",p.style.fontWeight="400",p.style.color="white",p.style.textShadow="1px 1px 1px rgba(0,0,0,0.5)",p.style.marginBottom="10px",p.textContent=n.title,c.appendChild(p),n.arrowUrl&&n.arrowUrl.length>0){const e=document.createElement("img");e.style.width="38px",e.style.height="38px",e.style.marginLeft="10px",e.style.marginBottom="10px",e.src=n.arrowUrl,e.addEventListener("click",(()=>{l()})),e.style.pointerEvents="auto",c.appendChild(e)}if(n.showCloseButton){const t=document.createElement("button");t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.width="30px",t.style.height="30px",t.style.backgroundColor="rgba(0,0,0,0.5)",t.style.color="white",t.style.border="none",t.style.borderRadius="50%",t.style.fontSize="20px",t.style.cursor="pointer",t.textContent="X",t.style.zIndex=a+1,t.addEventListener("click",(()=>{l()})),e.appendChild(t)}e.appendChild(c);const h=n.fadeOnScroll,g=new IntersectionObserver((t=>{t.forEach((t=>{h&&(e.style.opacity=t.intersectionRatio),0===t.intersectionRatio?document.body.classList.add("high-impact-topscroll-is-hidden"):document.body.classList.remove("high-impact-topscroll-is-hidden")}))}),{threshold:Array.from({length:101},((e,t)=>t/100))});return g.observe(e),document.body.classList.add("high-impact-topscroll-rendered"),{didRender:!0,destroy:()=>{document.body.classList.remove("high-impact-topscroll-rendered"),g.disconnect()}}}},p={name:"midscroll",onRender:({adWrapper:e,adUnit:t,adIframe:i},n,o)=>{e.style="";const s=o.topBarHeight||0,a=o.bottomBarHeight||0,r=n.zIndex||o.zIndex||1000002,d=e.getBoundingClientRect(),l=window.getComputedStyle(e).marginLeft,c=d.left-parseInt(l,10),p=n.peekAmount,h=p||`calc(100vh - ${s}px)`;return o.debug&&(Object.assign(e.style,{backgroundColor:"red"}),Object.assign(t.style,{backgroundColor:"red"})),Object.assign(e.style,{visibility:"visible",clipPath:`polygon(0 0, 100vw 0, 100vw ${h}, 0 ${h})`,height:h,overflow:"visible",padding:"0",position:"relative",margin:`0 0 0 -${c}px`,left:"0",top:0,zIndex:r}),Object.assign(t.style,{height:`calc(100vh - ${s}px - ${a}px)`,left:0,overflow:"hidden",position:"fixed",top:`${s}px`,width:"100vw"}),Object.assign(i.style,{width:"100vw",height:`calc(100vh - ${s}px - ${a}px)`}),{didRender:!0,destroy:()=>{}}}},h={name:"sitebar",onRender:({adWrapper:e,adUnit:t,adIframe:i},n,o)=>{const s=n.nonSitebarHeight?n.nonSitebarHeight:"101px",a=n.nonSitebarWidth?n.nonSitebarWidth:"1026px + 300px";return Object.assign(e.style,{aspectRatio:"1 / 2",width:`min(calc((100vw - ${a}) / 2), calc((100vh - ${s})/2))`,height:"auto"}),Object.assign(t.style,{width:"100%",height:"100%",border:"0pt none"}),Object.assign(i.style,{border:"0pt none",verticalAlign:"bottom",maxWidth:"100%",maxHeight:"100%",position:"relative"}),i.style.cssText+="; width: 100% !important; height: 100% !important;",{didRender:!0,destroy:()=>{}}}},g={name:"double-fullscreen",onRender:({adWrapper:e,adUnit:t,adIframe:i},n,o)=>{const s=n.topBarHeight||o.topBarHeight||0,a=new Map;Object.assign(e.style,{visibility:"visible",clipPath:"polygon(0 0, 100vw 0, 100vw 200vh, 0 200vh)",height:"200vh",overflow:"visible",position:"relative",padding:"0",margin:"0",left:"0",top:"0",zIndex:1001,display:"block",width:"100vw"}),Object.assign(t.style,{height:"200vh",left:"0",top:"0",overflow:"hidden",width:"100vw",position:"relative"}),Object.assign(i.style,{width:"100vw",height:`calc(100vh - ${s}px)`,position:"fixed",top:`${s}px`,zIndex:2});let r=[],d=new Map;return window.addEventListener("message",(t=>{if("high-impact-js"===t.data.type){if("double-fullscreen"===t.data.template&&t.data.src){const e=document.createElement("iframe");e.src=t.data.src,e.id="ad-background",Object.assign(e.style,{border:"0",display:"block",position:"absolute",width:"100%",height:"100%",zIndex:1}),i.parentElement.insertBefore(e,i)}if("addWaypoint"===t.data.action){console.log("Adding waypoint");const i=t.data.threshold,n=t.data.callbackId;if(i){if(d.set(i,{source:t.source,callbackId:n}),!a.has(i)){const t=(t=>{const i=document.createElement("div");return i.id=`sentinel-${t}`,Object.assign(i.style,{position:"absolute",width:"100%",height:"1px",top:100*t+"%",left:0,pointerEvents:"none",zIndex:-1}),e.appendChild(i),i})(i);a.set(i,t)}const o=a.get(i),s=new IntersectionObserver((e=>{e.forEach((e=>{const t=d.get(i);t&&t.source.postMessage({isIntersecting:e.isIntersecting,callbackId:t.callbackId,intersectionRatio:e.intersectionRatio,threshold:i},"*")}))}),{threshold:[0,1],rootMargin:"0px"});s.observe(o),r.push(s)}}}})),{didRender:!0,destroy:()=>{r.forEach((e=>e.disconnect())),a.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),a.clear()}}}},m={name:"skins",onRender:({adWrapper:e,adUnit:t,adIframe:i},n,o)=>{const s=n.zIndex||o.zIndex||1000002,a=document.querySelector(n.contentSelector),r=`${parseInt(n.topAdHeight)}px`,d=o.topBarHeight||0;let l=n.scrollTo.section||parseInt(n.scrollTo.height)||parseInt(o.scrollTo);if(Object.assign(e.style,{visibility:"visible",clipPath:`polygon(0 0, 100vw 0, 100vw ${r}, 0 ${r})`,overflow:"visible",padding:"0",position:"relative",left:"0",zIndex:s,display:"inline-block",height:"auto",width:"100%"}),Object.assign(t.style,{height:r,width:`${a.offsetWidth}px`,border:"0px",margin:"auto",textAlign:"center",position:"relative"}),Object.assign(i.style,{width:"100%",height:"100%",verticalAlign:"bottom",display:"block",colorScheme:"auto",position:"absolute"}),"string"==typeof l){const e=document.querySelector(l);l=`${e.offsetTop+e.offsetHeight+d}`}else l+=d;const c=document.createElement("div");Object.assign(c.style,{position:"fixed",top:`${d}px`,padding:"0px",left:"0",width:"100vw",height:`${l}px`,clipPath:`polygon(0 0, 100vw 0, 100vw ${l}px, 0 ${l}px)`,visibility:"visible",overflow:"visible",display:"flex",justifyContent:"space-between"}),a.parentNode.insertBefore(c,a),window.addEventListener("scroll",(()=>{const e=c.getBoundingClientRect();window.scrollY+window.innerHeight>=e.height?(c.style.position="absolute",c.style.top=l-window.innerHeight+"px"):(c.style.position="fixed",c.style.top=`${d}px`)}));const p=document.createElement("div");Object.assign(p.style,{overflow:"hidden",top:"0px",left:"0px",height:`${l}px`}),c.appendChild(p);const h=document.createElement("div");Object.assign(h.style,{overflow:"hidden",top:"0px",right:"0px",height:`${l}px`}),c.appendChild(h);const g=(e,t,i)=>{const n=document.createElement("iframe");n.src=e,n.id=t;return Object.assign(n.style,{border:"0",zIndex:1},i),n},m=n.sources.leftBanner,w=n.sources.rightBanner,f=g(m,"ad-left",{left:"0",top:"0",width:"100%",height:"100vh"});p.appendChild(f);const u=g(w,"ad-right",{right:"0",top:"0",width:"100%",height:"100vh"});h.appendChild(u);const y=()=>{const e=window.innerWidth-document.documentElement.clientWidth,t=(document.documentElement.clientWidth-a.clientWidth+e)/2;p.style.width=`${t}px`,h.style.width=`${t}px`,u.style.width=`${t}px`,f.style.width=`${t}px`};return y(),window.addEventListener("resize",y),{didRender:!0,destroy:()=>{}}}};const w=e=>{try{const t=document.createElement("style");t.type="text/css",t.innerHTML="\n      html, body, adfm-ad, #sf_align, .adform-adbox, .adform-adbox img {width: 100% !important; height: 100% !important; object-fit: cover;} iframe[data-contents*='adform']{width: 100vw !important;height: 100vh !important;}\n      [target='_blank'] img[src*='adnxs']{object-fit: cover !important;width: 100% !important;height: 100% !important;position: fixed;}\n      .banner {height: 0px !important;} .GoogleActiveViewClass, .GoogleActiveViewElement {transform: translate(calc(-50% + 50vw), 0); width: 100vw !important; height: 100vh !important; display: block;} .GoogleActiveViewClass img, .GoogleActiveViewElement img {width: 100vw !important; height: 100vh !important; object-fit: cover !important;} .GoogleActiveViewClass iframe {width: 100vw !important; height: 100vh !important;}.dcmads {width: 100%!important; height: 100% !important;}\n      iframe[src*='net/sadbundle/']{width: 100vw !important;height: 100vh !important;}\n    ",e.appendChild(t)}catch(e){i("Error applying responsive ad styling - possibly because of safe frame",e)}};function f(e){switch(e){case"./plugins/gam.js":return Promise.resolve().then((function(){return I}));case"./plugins/xandr.js":return Promise.resolve().then((function(){return x}));default:return new Promise((function(t,i){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}const u=e=>{i("Got Ad signal");for(const t of Object.values(window.highImpactJs.plugins)){let n;t.getSlotFromSource&&e&&e.source&&(n=t.getSlotFromSource(e.source),i("Got slot from source")),n&&y({...n,fromAdResponsiveSignal:!0})}},y=e=>{const{adWrapper:t,adUnit:a,adIframe:r,size:d,html:l,adUnitPath:f,elementId:u,fromAdResponsiveSignal:y=!1}=e,v=((e,t)=>{const n=`${s(e)}_${t}`;if(i("Looking for config: ",n),o.slots[n]){const e=o.slots[n];return i("Found config: ",n,JSON.stringify(e)),e}})(f,u);if(!v)return void i(`No config found for ${f} ${u}`);if(v.rendered){if(y)return void i(`Already rendered ${f} ${u} - skipping`);i(`Already rendered ${f} ${u} - running cleanup`),(({adWrapper:e,adUnit:t,adIframe:i},n)=>{e.classList.remove(`high-impact-ad-wrapper-${n}`),t.classList.remove(`high-impact-ad-unit-${n}`),i.classList.remove(`high-impact-ad-iframe-${n}`)})({adWrapper:t,adUnit:a,adIframe:r},v.template),v.rendered.destroy(),v.rendered=!1}else((e,t={})=>{try{const i=e.querySelector("iframe"),n=i.contentDocument||i.contentWindow.document;if(t.testTagToBeInserted){for(const e of n.body.children)e.style.display="none";const e=document.createElement("div");e.innerHTML=t.testTagToBeInserted,n.body.append(...[...e.childNodes].map((e=>{if("SCRIPT"===e.tagName){const t=document.createElement("script");return t.innerHTML=e.innerHTML,t}return e})))}}catch(e){i("Error applying responsive ad styling - possibly because of safe frame",e)}})(t,v);if(v.sizes&&v.sizes.length>0){if(!v.sizes.some((e=>JSON.stringify(e)===JSON.stringify(d))))return void i(`Size ${d} not in config for ${f} ${u} - ${v.sizes.join(", ")}`)}if(v.waitForAdSignal&&!y)return;if((e=>!!window.highImpactJs.config.ignoreSlotOn&&window.highImpactJs.config.ignoreSlotOn(e))(l))return;const b=window.highImpactJs.config,I=(e=>window.highImpactJs.templateConfig&&window.highImpactJs.templateConfig[e]?window.highImpactJs.templateConfig[e]:{})(v.template),x=(e=>{switch(e){case"midscroll":return p;case"topscroll":return c;case"sitebar":return h;case"double-fullscreen":return g;case"skins":return m}})(v.template).onRender(e,I,b);x&&((({adWrapper:e,adUnit:t,adIframe:i},n)=>{e.classList.add(`high-impact-ad-wrapper-${n}`),t.classList.add(`high-impact-ad-unit-${n}`),i.classList.add(`high-impact-ad-iframe-${n}`)})({adWrapper:t,adUnit:a,adIframe:r},v.template),v.rendered=x,n(t,!0),n(a),n(r),((e,t={})=>{try{const t=e.querySelector("iframe"),i=t.contentDocument||t.contentWindow.document;i.head&&w(i.head)}catch(e){i("Error applying responsive ad styling - possibly because of safe frame",e)}})(t,v),window.dispatchEvent(new CustomEvent("high-impact-ad-rendered",{detail:{size:{width:r.width,height:r.height},template:v.template}})))},v=async(e=[])=>{const t=await(async(e=[])=>{const t={};for(const n of e)try{t[n]=await f(`./plugins/${n}.js`),i(`${n} imported successfully!`)}catch(e){console.error(`Failed to import ${n}:`,e)}return t})(e);for(const e of Object.values(t)){if(e.init&&e.init(),e.getRenderedSlots){(await e.getRenderedSlots()).forEach((e=>{if(e.getResponseInformation){e.getResponseInformation().lineItemId&&y(e)}}))}e.onAdSlotRendered&&e.onAdSlotRendered(y)}return t};new Promise((async(e,t)=>{if(window.highImpactJs=window.highImpactJs||{cmd:[]},window.highImpactJs.initialized)t("Already initialized");else{if(i("high-impact.js init"),window.highImpactJs.initialized=!0,window.highImpactJs.templateConfig=window.highImpactJs.templateConfig||{},window.highImpactJs.config=window.highImpactJs.config||{},window.highImpactJs.defineSlot=a,window.highImpactJs.setTemplateConfig=d,window.highImpactJs.setConfig=l,window.highImpactJs&&Array.isArray(window.highImpactJs.cmd)&&window.highImpactJs.cmd.length>0)for(;window.highImpactJs.cmd.length;){const e=window.highImpactJs.cmd.shift();"function"==typeof e&&await e()}var n;window.highImpactJs.cmd=r,window.highImpactJs.config.plugins||(window.highImpactJs.config.plugins=["gam"]),window.highImpactJs.config.plugins&&(window.highImpactJs.plugins=await v(window.highImpactJs.config.plugins)),n=u,window.addEventListener("message",(e=>{try{const t=JSON.parse(e.data);if("high-impact-js"===t.sender&&"AD_RENDERED"===t.action){let i;try{i=e.source.name}catch(e){}n({source:e.source,iframeName:i,...t})}}catch(e){}})),e()}}));const b=e=>{const t=e.getSlotElementId(),i=document.getElementById(t);if(i){const[n,o]=i.querySelectorAll('div[id^="google_ads_iframe_"], iframe[id^="google_ads_iframe_"]'),s=e.getHtml(),a=e.getAdUnitPath();return{adWrapper:i,adUnit:n,adIframe:o,size:e.size,html:s,adUnitPath:a,elementId:t,plugin:"gam"}}};var I=Object.freeze({__proto__:null,getRenderedSlots:async()=>new Promise((e=>{googletag.cmd.push((()=>{const t=googletag.pubads().getSlots().filter((e=>e&&e.adIframe&&e.adUnit)).map((e=>b(e)));e(t.filter((e=>e.adIframe&&e.adUnit)))}))})),getSlotFromSource:e=>{const t=document.querySelectorAll('iframe[id*="google_ads_iframe"]');if(!t)return;const i=(e,t)=>t===e||e!==window.top&&i(e.parent,t),n=Array.from(t).find((t=>i(e,t.contentWindow)));if(!n)return;const o=n.id.replace("google_ads_iframe_",""),s=googletag.pubads().getSlotIdMap()[o];return s?b(s):void 0},init:()=>{window.googletag=window.googletag||{cmd:[]}},onAdSlotRendered:e=>{googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{if(t.isEmpty)return;const{slot:i}=t;i.size=t.size;const n=b(i);e(n)}))}))}});var x=Object.freeze({__proto__:null,getRenderedSlots:async()=>new Promise((e=>{})),getSlotFromSource:e=>{},onAdSlotRendered:e=>{}})}();
